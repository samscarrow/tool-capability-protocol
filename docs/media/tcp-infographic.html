<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: The Tool Capability Protocol (TCP)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        .flow-arrow-down::after {
            content: 'â†“';
            display: block;
            text-align: center;
            font-size: 2.5rem;
            line-height: 1;
            color: #0077B6;
            margin: 0.5rem 0;
            font-weight: 900;
        }
        .bit-box {
            transition: all 0.3s ease-in-out;
        }
        .bit-on {
            background-color: #0077B6;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 119, 182, 0.4);
        }
        .bit-off {
            background-color: #e0e0e0;
            color: #666;
        }
        .tree ul {
            position: relative;
            padding-top: 1rem;
            display: flex;
            justify-content: center;
        }
        .tree li {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            padding: 1rem 0.5rem;
        }
        .tree li::before, .tree li::after {
            content: '';
            position: absolute;
            top: 0;
            right: 50%;
            border-top: 2px solid #90E0EF;
            width: 50%;
            height: 1rem;
        }
        .tree li::after {
            right: auto;
            left: 50%;
            border-left: 2px solid #90E0EF;
        }
        .tree li:only-child::after, .tree li:only-child::before {
            display: none;
        }
        .tree li:first-child::before, .tree li:last-child::after {
            border: 0 none;
        }
        .tree li:last-child::before {
            border-right: 2px solid #90E0EF;
            border-radius: 0 5px 0 0;
        }
        .tree li:first-child::after {
            border-radius: 5px 0 0 0;
        }
        .tree ul ul::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            border-left: 2px solid #90E0EF;
            width: 0;
            height: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <main class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-6xl font-black text-[#004AAD] uppercase tracking-wider">The Tool Capability Protocol</h1>
            <p class="text-xl md:text-2xl font-semibold text-[#0077B6] mt-2">A Visual Guide to Instant AI Safety</p>
        </header>

        <section id="problem" class="mb-20">
            <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">The Problem: AI Agents Are Flying Blind</h2>
                <p class="text-lg text-gray-600">
                    AI agents that use command-line tools must read slow, complex, and inconsistent documentation (<code class="whitespace-nowrap">--help</code> text, man pages) to understand what a command does. This process is unreliable and creates a massive security vulnerability.
                </p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold text-red-800 mb-2">The Old Way: Text Parsing</h3>
                    <ul class="space-y-2 list-disc list-inside text-red-700">
                        <li><b class="font-semibold">Slow:</b> Takes seconds or minutes per command.</li>
                        <li><b class="font-semibold">Inconsistent:</b> Every tool's help text is different.</li>
                        <li><b class="font-semibold">Ambiguous:</b> Natural language is hard to parse for security risks.</li>
                        <li><b class="font-semibold">Insecure:</b> Easy to misinterpret and execute dangerous commands.</li>
                    </ul>
                </div>
                <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-bold text-green-800 mb-2">The TCP Solution: Binary Descriptor</h3>
                     <ul class="space-y-2 list-disc list-inside text-green-700">
                        <li><b class="font-semibold">Instant:</b> &lt;1 millisecond analysis time.</li>
                        <li><b class="font-semibold">Standardized:</b> A single, 24-byte format for all tools.</li>
                        <li><b class="font-semibold">Deterministic:</b> Clear, unambiguous security flags.</li>
                        <li><b class="font-semibold">Secure by Design:</b> Enables provably safe decision-making.</li>
                    </ul>
                </div>
            </div>
        </section>

        <hr class="my-16 border-gray-300">

        <section id="anatomy" class="mb-20">
            <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Anatomy of a TCP Descriptor</h2>
                <p class="text-lg text-gray-600">
                    The core of TCP is a hyper-compact, 24-byte binary structure. Every field is designed for maximum information density, providing a complete security and performance profile that can be read and understood in microseconds.
                </p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <div class="font-mono text-center text-sm md:text-base mb-4 text-gray-500">Total Size: 24 Bytes</div>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-px bg-gray-200 rounded-lg overflow-hidden text-center">
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Magic</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">"TCP\\x02"</div>
                    </div>
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Cmd Hash</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">zlib.crc32</div>
                    </div>
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Security Flags</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">Bitmask</div>
                    </div>
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Perf. Hints</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">CPU/Mem/IO</div>
                    </div>
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Priv/Risk</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">User/Root</div>
                    </div>
                    <div class="p-4 bg-white">
                        <div class="font-bold text-[#004AAD]">Checksum</div>
                        <div class="font-mono text-sm">4 Bytes</div>
                        <div class="text-xs text-gray-500 mt-1">CRC32</div>
                    </div>
                </div>
                <div class="font-mono text-center text-sm bg-gray-800 text-white p-4 rounded-lg mt-6">
                    <span class="text-green-400"># Example for `rm`:</span> 544350020002d67f249b0000022f138801f40032000296f8
                </div>
            </div>
        </section>
        
        <hr class="my-16 border-gray-300">

        <section id="flags" class="mb-20">
             <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Decoding the Security Flags</h2>
                <p class="text-lg text-gray-600">
                    The 4-byte (32-bit) Security Flags field is the heart of TCP's intelligence. Each bit represents a specific capability or risk. An agent can instantly understand a command's potential by checking which bits are "on".
                </p>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="flex justify-center mb-6 space-x-4">
                    <button id="btn-ls" class="px-4 py-2 font-semibold rounded-lg shadow">ls</button>
                    <button id="btn-curl" class="px-4 py-2 font-semibold rounded-lg shadow">curl</button>
                    <button id="btn-rm" class="px-4 py-2 font-semibold rounded-lg shadow">rm -rf</button>
                    <button id="btn-mount" class="px-4 py-2 font-semibold rounded-lg shadow">mount</button>
                </div>
                <div id="bit-grid" class="grid grid-cols-4 md:grid-cols-8 gap-3 text-xs text-center font-mono">
                </div>
            </div>
        </section>

        <hr class="my-16 border-gray-300">

        <section id="hierarchy" class="mb-20">
            <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Hierarchical Compression for Tool Families</h2>
                <p class="text-lg text-gray-600">
                    For complex tools like `git` or `docker` with hundreds of subcommands, TCP uses a second-order encoding. A single "family" descriptor stores common properties, and each subcommand only needs to store what makes it unique, achieving massive additional compression.
                </p>
            </div>
            <div class="bg-white p-8 rounded-xl shadow-lg tree">
                <ul>
                    <li>
                        <div class="p-4 bg-[#004AAD] text-white rounded-lg shadow-lg">
                            <div class="font-bold">git (Family Descriptor)</div>
                            <div class="text-xs font-mono mt-1">Common Flags: Network, File I/O</div>
                        </div>
                        <ul>
                            <li>
                                <div class="p-3 bg-[#90E0EF] rounded-lg shadow">
                                    <div class="font-bold">commit</div>
                                    <div class="text-xs font-mono mt-1">Flags: +Write</div>
                                </div>
                            </li>
                            <li>
                                <div class="p-3 bg-[#90E0EF] rounded-lg shadow">
                                    <div class="font-bold">push</div>
                                    <div class="text-xs font-mono mt-1">Flags: +NetWrite</div>
                                </div>
                            </li>
                            <li>
                                <div class="p-3 bg-[#90E0EF] rounded-lg shadow">
                                    <div class="font-bold">pull</div>
                                    <div class="text-xs font-mono mt-1">Flags: +NetRead</div>
                                </div>
                            </li>
                             <li>
                                <div class="p-3 bg-[#90E0EF] rounded-lg shadow">
                                    <div class="font-bold">rebase</div>
                                    <div class="text-xs font-mono mt-1">Flags: +Destructive</div>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <hr class="my-16 border-gray-300">

        <section id="workflow" class="mb-20">
            <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">The Agent's Decision Workflow</h2>
                <p class="text-lg text-gray-600">
                    In less than a millisecond, a TCP-enabled agent follows a simple, foolproof process to determine if a command is safe to execute.
                </p>
            </div>
            <div class="bg-white p-8 rounded-xl shadow-lg">
                 <div class="space-y-4 text-center max-w-md mx-auto">
                    <div class="p-4 bg-gray-100 rounded-lg shadow-inner">1. Agent wants to run <code class="font-mono bg-gray-200 px-1 rounded">`rm -rf /`</code></div>
                    <div class="flow-arrow-down"></div>
                    <div class="p-4 bg-gray-100 rounded-lg shadow-inner">2. Performs instant hash lookup in TCP database</div>
                    <div class="flow-arrow-down"></div>
                    <div class="p-4 bg-[#CAF0F8] rounded-lg shadow-inner">3. Receives 24-byte descriptor</div>
                    <div class="flow-arrow-down"></div>
                    <div class="p-4 bg-[#90E0EF] rounded-lg shadow-inner">4. Parses flags: Sees <b class="font-mono">DESTRUCTIVE</b> and <b class="font-mono">CRITICAL</b> bits are ON</div>
                    <div class="flow-arrow-down"></div>
                    <div class="p-4 bg-red-200 text-red-900 font-bold rounded-lg shadow-inner">5. BLOCKS execution and requests human approval</div>
                </div>
            </div>
        </section>

        <hr class="my-16 border-gray-300">

        <section id="impact" class="mb-16">
            <div class="text-center max-w-4xl mx-auto mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">The Impact: A Revolution in Scale and Speed</h2>
                <p class="text-lg text-gray-600">
                    TCP's compression and speed are not just incremental improvements; they represent a fundamental shift in how machines can understand and manage software risk.
                </p>
            </div>
             <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="chart-container">
                    <canvas id="compressionChart"></canvas>
                </div>
                <p class="text-sm text-gray-500 text-center mt-4">TCP achieves a compression ratio of up to 13,669:1 compared to traditional documentation, enabling system-wide security intelligence with a negligible footprint.</p>
            </div>
        </section>
        
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                  return label.join(' ');
                } else {
                  return label;
                }
            };

            const defaultChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            };

            const colors = {
                darkBlue: '#004AAD',
                midBlue: '#0077B6',
                lightBlue: '#90E0EF',
                paleBlue: '#CAF0F8',
                white: '#FFFFFF'
            };

            const compressionCtx = document.getElementById('compressionChart');
            if(compressionCtx) {
                new Chart(compressionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Traditional Docs', 'Man Pages', 'TCP Descriptors'],
                        datasets: [{
                            label: 'Size in KB (Log Scale)',
                            data: [25000, 800, 17],
                            backgroundColor: [ '#e0e0e0', colors.lightBlue, colors.darkBlue],
                            borderColor: [ '#cccccc', colors.midBlue, colors.darkBlue],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                type: 'logarithmic',
                                min: 1,
                                max: 50000,
                                ticks: {
                                    callback: function(value, index, values) {
                                        return Number(value.toString()).toLocaleString() + ' KB'
                                    }
                                }
                            }
                        },
                         plugins: {
                           ...defaultChartOptions.plugins,
                           legend: { display: false }
                        }
                    }
                });
            }

            const bitGrid = document.getElementById('bit-grid');
            const flagData = {
                'DESTRUCTIVE': { bit: 7, desc: 'Irreversibly alters data or state.' },
                'NET_ACCESS': { bit: 8, desc: 'Accesses the network.' },
                'FILE_WRITE': { bit: 9, desc: 'Modifies files on disk.' },
                'SYS_MOD': { bit: 10, desc: 'Modifies system configuration.' },
                'PRIV_ESC': { bit: 11, desc: 'Potential for privilege escalation.' },
                'KERNEL_MOD': { bit: 12, desc: 'Interacts with kernel modules.' },
                'FILE_READ': { bit: 16, desc: 'Reads files from disk.' },
                'CRITICAL': { bit: 4, desc: 'Highest risk category.' },
            };

            const commandFlags = {
                'ls': ['FILE_READ'],
                'curl': ['NET_ACCESS', 'FILE_READ'],
                'rm -rf': ['DESTRUCTIVE', 'FILE_WRITE', 'CRITICAL'],
                'mount': ['DESTRUCTIVE', 'SYS_MOD', 'PRIV_ESC', 'KERNEL_MOD', 'CRITICAL']
            };
            
            Object.keys(flagData).forEach(key => {
                const bitBox = document.createElement('div');
                bitBox.id = `bit-${key}`;
                bitBox.className = 'bit-box p-3 rounded-lg shadow-md bit-off';
                bitBox.innerHTML = `<div class="font-bold">${key}</div><div class="text-xs mt-1">Bit ${flagData[key].bit}</div>`;
                bitBox.title = flagData[key].desc;
                bitGrid.appendChild(bitBox);
            });

            function updateBits(command) {
                const activeFlags = commandFlags[command];
                Object.keys(flagData).forEach(key => {
                    const bitBox = document.getElementById(`bit-${key}`);
                    if (activeFlags.includes(key)) {
                        bitBox.classList.remove('bit-off');
                        bitBox.classList.add('bit-on');
                    } else {
                        bitBox.classList.remove('bit-on');
                        bitBox.classList.add('bit-off');
                    }
                });
            }
            
            function setActiveButton(activeBtn) {
                ['btn-ls', 'btn-curl', 'btn-rm', 'btn-mount'].forEach(id => {
                    const btn = document.getElementById(id);
                    if (btn === activeBtn) {
                        btn.classList.add('bg-[#0077B6]', 'text-white');
                        btn.classList.remove('bg-gray-200');
                    } else {
                        btn.classList.remove('bg-[#0077B6]', 'text-white');
                        btn.classList.add('bg-gray-200');
                    }
                });
            }

            document.getElementById('btn-ls').addEventListener('click', (e) => { updateBits('ls'); setActiveButton(e.target); });
            document.getElementById('btn-curl').addEventListener('click', (e) => { updateBits('curl'); setActiveButton(e.target); });
            document.getElementById('btn-rm').addEventListener('click', (e) => { updateBits('rm -rf'); setActiveButton(e.target); });
            document.getElementById('btn-mount').addEventListener('click', (e) => { updateBits('mount'); setActiveButton(e.target); });

            // Initial state
            document.getElementById('btn-ls').click();

        });
    </script>
</body>
</html>